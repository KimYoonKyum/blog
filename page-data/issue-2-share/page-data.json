{"componentChunkName":"component---src-templates-post-template-tsx","path":"/issue-2-share/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>문제 발생</h1>\n<ul>\n<li>모바일 웹 서비스 기능 내 특정 버튼 또는 링크 클릭스 문자메세지로 url 공유하기 기능을 구현해야하는 일이 있었다.(클릭 시 모바일 디바이스 내 문자메세지 텍스트 입력창 내용과 함께 이동됨)</li>\n<li>이걸 맡으신 분은 우리 팀 신입개발자분.</li>\n<li>그 분 말로는 텍스트만 전송하는 것은 되는데 이미지 첨부된 상태로는 이동이 안된다함.</li>\n<li>최초에 그 분이 작업 하던 코드는 아래와 비슷했다(회사 코드는 공유된 곳에 올리면 안되기에 비슷하게 표현)\r\n<img src=\"https://user-images.githubusercontent.com/21151247/222418364-af4a8311-e04a-4470-b142-3f4c9657bbcb.PNG\" alt=\"sms_share_1\"></li>\n</ul>\n<h1>문제 해결 단계</h1>\n<ul>\n<li>일단 이미지가 첨부된 것 문자메세지는 sms 형식이 아니라 mms 형식이라는 것을 파악 했다.</li>\n<li>a 태그 안에 href 속성을 mms 스킴이 들어가도록 수정해보았는데 역시나 텍스트만 들어가고 동작하지 않았다.</li>\n<li>stackoverflow , 구글 등 여러 검색을 해보았지만 html 태그로 구현되는 이미지 첨부한 문자메세지 보내는 기능은 찾아볼 수가 없었다.</li>\n<li>여러가지 검색 중에 Web API 중에 Navigator.share 라는 기능이 있다는 것을 알았다.</li>\n<li>Navigator.share란 무엇이고 어떻게 사용?\n<ul>\n<li>모바일 디바이스의 네이티브 공유하기 기능을 웹에서 실행 시켜주는 것</li>\n<li>아래와 같이 사용한다.</li>\n<li>\n<img width=\"450\" alt=\"sms_share_2\" src=\"https://user-images.githubusercontent.com/21151247/222420531-4db2f757-7358-432b-800c-15c7434c3ec5.png\">\n</li>\n<li>data 객체는 공유할 text, url, files이 포함된다. 이 셋 중에 하나라도 있어야 한다.</li>\n<li>리턴 값은 promise 객체이고 파라미터가 제대로 명시 되지 않는다면 즉시 reject 된다.</li>\n<li>Navigator.share는 HTTPS 가 적용된 도메인 에서만 가능하다.</li>\n<li>Navigator.share는 모든 브라우저에서 지원되지 않는다. 따라서 지원하는 브라우저인지 아닌지 판별하는 로직이 필요하다.</li>\n<li>함께 사용해줘야 하는 메소드로 Navigator.canShare 가 있다.</li>\n<li>오늘 테스트중 공유하기 기능이 동작 안했던 대표적인 브라우저로 안드로이드-네이버 앱 브라우저가 있었다.</li>\n</ul>\n</li>\n<li>실행하면 아래와 같다\n<ul>\n<li><img src=\"https://user-images.githubusercontent.com/21151247/222422741-9d477fff-e94c-4405-b90c-dc377a6ff932.jpg\" alt=\"share\"></li>\n<li>sms test를 누르면 bottom sheet 처럼 위와 같은 공유하기 영역이 나온다</li>\n<li><img src=\"https://user-images.githubusercontent.com/21151247/222422926-63a83318-79fd-4340-9850-102df8b24dee.jpg\" alt=\"sms_share\"></li>\n<li>메세지를 클릭하면 코드에서 file에 추가 되었던 이미지가 텍스트와 함께 첨부되어서 나온다</li>\n<li><img src=\"https://user-images.githubusercontent.com/21151247/222423099-67846cb2-b801-423a-974e-df4baf7666ab.jpg\" alt=\"insta_share\"></li>\n<li>인스타그램 공유를 하면 게시물,스토리,DM 중에서 선택해서 공유할 수 있다.</li>\n<li>위 예 말고도 카카오나 다른 여러가지 공유할 수 있는 앱들이 있다.</li>\n</ul>\n</li>\n<li>위 방식으로 하니 최초 요구사항 이었던 카카오 공유하기, 문자메세지로 공유하기, 인스타그램으로 공유하기 세가지 요구사항이 한번에 처리 되었다.</li>\n</ul>\n<h1>아쉬웠던 점</h1>\n<ul>\n<li>버튼 클릭시 바로 텍스트 메세지 입력창으로 이동하거나 카카오 앱으로 이동하거나 인스타그램 으로 이동하지 않고 Navigator.share가 지원하는 bottom sheet와 같은 창 하나를 띄운 다음에 선택해야 하는 것이 조금 아쉬웠다.</li>\n<li>위와 같은 이유로 사실 기획자 분과 공유하기 bottom sheet가 한번 실행 되는 것에 관련 협의를 하긴 했었다.</li>\n<li>다행히 PM 분도 공유하기 기능 중 가장 중요한 인스타그램 게시물/스토리/DM 기능이 동작하는 것이 더 중요하다고 생각해 Navigator.share의 기능을 사용하기로 했다</li>\n<li>그렇지만 어찌되었던 사용자가  bottom sheet 통해서 한번 더 공유해야한다는 것이 개발자인 나로서는 약간 맘에 들지 않았다.</li>\n<li>더 좋은 방법이 있나 시간이 있으면 찾아보고 더 좋은 방법이 있으면 댓글로 알려주시면 너무 감사하겠습니다~!</li>\n</ul>\n<h1>Source</h1>\n<ul>\n<li>MDN\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/API/Navigator/share/\" target=\"_blank\" rel=\"nofollow\"><a href=\"https://developer.mozilla.org/ko/docs/Web/API/Navigator/share/\" target=\"_blank\" rel=\"nofollow\">https://developer.mozilla.org/ko/docs/Web/API/Navigator/share/</a></a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"오늘의 이슈","summary":"공유하기 기능 관련 이슈","date":"2023.03.02.","categories":["Web API","Share","issue"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQoz5WTS0iUURiGz6oQo6BtbiKI7uEi21TgsnZl5CJcGJjdI4nGdKOjpQVDZTcSu5Iwq7IoJp0spKRG8NKUwSA0oxTpyJjjjGPO/Oc88d/mHymKXvj43/N/33n5zvneI5RS6NC/f+P/DLMYYW+yobQMKGkklZQoqZlcSSOQWva/kTNCOoK22FwyQSo+bfCMFUYNkMaBZCEyVg1Wl0JfpoD3x4oZqysh8q6TCVcxo0cKCQe6+Xa3lmjFaoYunSTQVMnknTMEfV6Gb7r40FZP3L2TMU85mnNkxawGj8o34K/chH93Hj9KBS/qynjqqSa2SzBQUcDjtmsEj69DHRC8bD5EX+kS/HuXMbVH8LF6h3Ucad5hNP6TgdMrSLYU0v38Cb5z+xmvyWe4vYqO25cZPLuGL+fX4jtagGrMo79hK6HmIl67NhOsXcXISMjSswTHp+YYci8l7FlO75XtxB6uJ3FB4DuxiNF7W4i2LCZ1PZ8H7n1MNwnwCD531NBzsYhYo+CT96DlCEswMTtPr/cU/c8a6LpVRqh1Jd/f1vOms53A1Y1EvNuIhXuIzaR5df8wEX8V8ZkkfV2tfA3cYDIymLVYdsoqZ3LzOet0zsRtaPwOW8fxodJ9lUEpzfSh1JDS4nrOCGX6zuLK3iM1p8P/eQ0Lav/wovQOfwHRigRaEAJUMQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/527bce94ce6c29e8f04743861f72e7e6/8f489/issue-logo.png","srcSet":"/static/527bce94ce6c29e8f04743861f72e7e6/5962e/issue-logo.png 121w,\n/static/527bce94ce6c29e8f04743861f72e7e6/79bdc/issue-logo.png 242w,\n/static/527bce94ce6c29e8f04743861f72e7e6/8f489/issue-logo.png 484w","sizes":"(min-width: 484px) 484px, 100vw"},"sources":[{"srcSet":"/static/527bce94ce6c29e8f04743861f72e7e6/6bfae/issue-logo.webp 121w,\n/static/527bce94ce6c29e8f04743861f72e7e6/a1be8/issue-logo.webp 242w,\n/static/527bce94ce6c29e8f04743861f72e7e6/a9a3d/issue-logo.webp 484w","type":"image/webp","sizes":"(min-width: 484px) 484px, 100vw"}]},"width":484,"height":263}},"publicURL":"/static/527bce94ce6c29e8f04743861f72e7e6/issue-logo.png"}}}}]}},"pageContext":{"slug":"/issue-2-share/"}},"staticQueryHashes":[]}